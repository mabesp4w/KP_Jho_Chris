import{u as M,r as l,b as E,j as e,H as B,a as b}from"./app-DDX0xv1r.js";import{A as H}from"./AdminLayout-CXvec8_Q.js";import{C as v,a as N,b as T,c as A,d as $}from"./Card-DDTHZYOv.js";import{B as m}from"./Button-YWzNK7qA.js";import{S as z,C as I,M as P}from"./SearchInput-C4ONvTdq.js";import{a as F}from"./tag-D7XBxK3Q.js";import"./Avatar-Wd9zO0g3.js";import"./createLucideIcon-DwLR9Szp.js";function J({auth:w,kategoriKontens:_}){const{flash:u}=M().props,[o,x]=l.useState({open:!1,kategoriKonten:null}),[r,g]=l.useState({open:!1,kategoriKonten:null}),[i,C]=l.useState("");l.useEffect(()=>{window.aosInitialized||(F.init({duration:800,easing:"ease-in-out",once:!0}),window.aosInitialized=!0)},[]);const{data:t,setData:d,post:K,processing:h,errors:s,reset:p}=E({nm_kategori:"",slug_kategori:"",desk_kategori:""}),k=a=>a.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"");l.useEffect(()=>{t.nm_kategori&&d("slug_kategori",k(t.nm_kategori))},[t.nm_kategori]);const j=_.filter(a=>{const n=i.toLowerCase();return a.nm_kategori.toLowerCase().includes(n)||a.slug_kategori.toLowerCase().includes(n)||(a.desk_kategori||"").toLowerCase().includes(n)}),y=a=>{x({open:!0,kategoriKonten:a})},S=()=>{o.kategoriKonten&&b.post(`/admin/kategori-konten/${o.kategoriKonten.id}`,{_method:"DELETE"},{preserveScroll:!0,onSuccess:()=>{x({open:!1,kategoriKonten:null})}})},f=()=>{p(),g({open:!0,kategoriKonten:null})},L=a=>{d({nm_kategori:a.nm_kategori,slug_kategori:a.slug_kategori||k(a.nm_kategori),desk_kategori:a.desk_kategori||""}),g({open:!0,kategoriKonten:a})},c=()=>{g({open:!1,kategoriKonten:null}),p()},D=a=>{a.preventDefault(),r.kategoriKonten?b.post(`/admin/kategori-konten/${r.kategoriKonten.id}`,{_method:"PUT",...t},{preserveScroll:!0,onSuccess:()=>{c()}}):K(route("admin.kategori-konten.store"),{preserveScroll:!0,onSuccess:()=>{c()}})};return e.jsxs(H,{auth:w,header:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold leading-tight text-base-content",children:"Kelola Kategori Konten"}),e.jsx(m,{variant:"primary",onClick:f,children:"Tambah Kategori"})]}),children:[e.jsx(B,{title:"Kelola Kategori Konten"}),e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"mb-6","data-aos":"fade-down",children:e.jsx(z,{placeholder:"Cari kategori konten...",value:i,onChange:a=>C(a.target.value)})}),u?.success&&e.jsx("div",{"data-aos":"fade-down",className:"mb-6",children:e.jsxs("div",{className:"alert alert-success",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 shrink-0 stroke-current",fill:"none",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{children:u.success})]})}),j.length===0?e.jsx("div",{"data-aos":"fade-up",children:e.jsx(v,{children:e.jsx(N,{children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-base-content/60 mb-4",children:i?"Tidak ada kategori konten yang sesuai dengan pencarian":"Belum ada data kategori konten"}),!i&&e.jsx(m,{variant:"primary",onClick:f,children:"Tambah Kategori Pertama"})]})})})}):e.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:j.map((a,n)=>e.jsx("div",{"data-aos":"fade-up","data-aos-delay":n*100,children:e.jsxs(v,{className:"h-full",children:[e.jsx(T,{children:e.jsx(A,{className:"text-lg",children:a.nm_kategori})}),e.jsx(N,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-base-content/60",children:"Slug:"}),e.jsx("p",{className:"text-sm text-base-content",children:a.slug_kategori})]}),a.desk_kategori&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-base-content/60",children:"Deskripsi:"}),e.jsx("p",{className:"text-sm text-base-content",children:a.desk_kategori})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-base-content/60",children:"Dibuat:"}),e.jsx("p",{className:"text-sm text-base-content",children:new Date(a.created_at).toLocaleDateString("id-ID")})]})]})}),e.jsxs($,{children:[e.jsx("button",{className:"btn btn-warning btn-sm",onClick:()=>L(a),title:"Edit",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("button",{className:"btn btn-error btn-sm",onClick:()=>y(a),title:"Hapus",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})},a.id))})]}),e.jsx(I,{id:"delete-kategori-modal",isOpen:o.open,onClose:()=>x({open:!1,kategoriKonten:null}),onConfirm:S,title:"Hapus Kategori Konten",message:`Apakah Anda yakin ingin menghapus kategori "${o.kategoriKonten?.nm_kategori}"?`}),e.jsx(P,{id:"kategori-form-modal",isOpen:r.open,onClose:c,title:r.kategoriKonten?"Edit Kategori Konten":"Tambah Kategori Konten",size:"lg",children:e.jsx("form",{onSubmit:D,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"form-control w-full",children:[e.jsx("label",{className:"label",children:e.jsxs("span",{className:"label-text",children:["Nama Kategori ",e.jsx("span",{className:"text-error",children:"*"})]})}),e.jsx("input",{type:"text",placeholder:"Contoh: Tutorial, Review Produk, Dance",className:`input input-bordered w-full ${s.nm_kategori?"input-error":""}`.trim(),value:t.nm_kategori,onChange:a=>d("nm_kategori",a.target.value),required:!0,maxLength:100}),s.nm_kategori&&e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text-alt text-error",children:s.nm_kategori})})]}),e.jsxs("div",{className:"form-control w-full",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Slug Kategori"})}),e.jsx("input",{type:"text",placeholder:"Akan di-generate otomatis",className:`input input-bordered w-full ${s.slug_kategori?"input-error":""}`.trim(),value:t.slug_kategori,readOnly:!0,maxLength:100}),s.slug_kategori&&e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text-alt text-error",children:s.slug_kategori})})]}),e.jsxs("div",{className:"form-control w-full",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Deskripsi"})}),e.jsx("textarea",{className:`textarea textarea-bordered ${s.desk_kategori?"textarea-error":""}`.trim(),placeholder:"Deskripsi kategori...",value:t.desk_kategori,onChange:a=>d("desk_kategori",a.target.value),rows:3}),s.desk_kategori&&e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text-alt text-error",children:s.desk_kategori})})]}),e.jsxs("div",{className:"modal-action",children:[e.jsx(m,{type:"button",variant:"ghost",onClick:c,disabled:h,children:"Batal"}),e.jsx(m,{type:"submit",variant:"primary",loading:h,children:r.kategoriKonten?"Update Kategori":"Simpan Kategori"})]})]})})})]})}export{J as default};
