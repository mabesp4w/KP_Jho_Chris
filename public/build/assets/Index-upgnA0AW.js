import{u as D,r as n,b as E,j as e,H as B,a as b}from"./app-CjDbdObc.js";import{A as H}from"./AdminLayout-u3UsJVij.js";import{C as w,a as N,b as A,c as $,d as z}from"./Card-Brh-erEJ.js";import{B as c}from"./Button-BzKMKfAB.js";import{S as I,C as F,M as O}from"./SearchInput-CC-ldz7D.js";import{a as P}from"./tag-KTfluBNR.js";import"./Avatar-CPtAHbrq.js";import"./createLucideIcon-CNnzuROm.js";function J({auth:_,tags:C}){const{flash:x}=D().props,[r,m]=n.useState({open:!1,tag:null}),[l,u]=n.useState({open:!1,tag:null}),[o,k]=n.useState("");n.useEffect(()=>{window.aosInitialized||(P.init({duration:800,easing:"ease-in-out",once:!0}),window.aosInitialized=!0)},[]);const{data:s,setData:g,post:y,processing:h,errors:t,reset:p}=E({nm_tag:"",slug_tag:""}),j=a=>a.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"");n.useEffect(()=>{s.nm_tag&&g("slug_tag",j(s.nm_tag))},[s.nm_tag]);const f=C.filter(a=>{const d=o.toLowerCase();return a.nm_tag.toLowerCase().includes(d)||a.slug_tag.toLowerCase().includes(d)}),T=a=>{m({open:!0,tag:a})},S=()=>{r.tag&&b.post(`/admin/tag/${r.tag.id}`,{_method:"DELETE"},{preserveScroll:!0,onSuccess:()=>{m({open:!1,tag:null})}})},v=()=>{p(),u({open:!0,tag:null})},L=a=>{g({nm_tag:a.nm_tag,slug_tag:a.slug_tag||j(a.nm_tag)}),u({open:!0,tag:a})},i=()=>{u({open:!1,tag:null}),p()},M=a=>{a.preventDefault(),l.tag?b.post(`/admin/tag/${l.tag.id}`,{_method:"PUT",...s},{preserveScroll:!0,onSuccess:()=>{i()}}):y(route("admin.tag.store"),{preserveScroll:!0,onSuccess:()=>{i()}})};return e.jsxs(H,{auth:_,header:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold leading-tight text-base-content",children:"Kelola Tag"}),e.jsx(c,{variant:"primary",onClick:v,children:"Tambah Tag"})]}),children:[e.jsx(B,{title:"Kelola Tag"}),e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"mb-6","data-aos":"fade-down",children:e.jsx(I,{placeholder:"Cari tag...",value:o,onChange:a=>k(a.target.value)})}),x?.success&&e.jsx("div",{"data-aos":"fade-down",className:"mb-6",children:e.jsxs("div",{className:"alert alert-success",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 shrink-0 stroke-current",fill:"none",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{children:x.success})]})}),f.length===0?e.jsx("div",{"data-aos":"fade-up",children:e.jsx(w,{children:e.jsx(N,{children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-base-content/60 mb-4",children:o?"Tidak ada tag yang sesuai dengan pencarian":"Belum ada data tag"}),!o&&e.jsx(c,{variant:"primary",onClick:v,children:"Tambah Tag Pertama"})]})})})}):e.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:f.map((a,d)=>e.jsx("div",{"data-aos":"fade-up","data-aos-delay":d*100,children:e.jsxs(w,{className:"h-full",children:[e.jsx(A,{children:e.jsx($,{className:"text-lg",children:a.nm_tag})}),e.jsx(N,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-base-content/60",children:"Slug:"}),e.jsx("p",{className:"text-sm text-base-content",children:a.slug_tag})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-base-content/60",children:"Dibuat:"}),e.jsx("p",{className:"text-sm text-base-content",children:new Date(a.created_at).toLocaleDateString("id-ID")})]})]})}),e.jsxs(z,{children:[e.jsx("button",{className:"btn btn-warning btn-sm",onClick:()=>L(a),title:"Edit",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("button",{className:"btn btn-error btn-sm",onClick:()=>T(a),title:"Hapus",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})},a.id))})]}),e.jsx(F,{id:"delete-tag-modal",isOpen:r.open,onClose:()=>m({open:!1,tag:null}),onConfirm:S,title:"Hapus Tag",message:`Apakah Anda yakin ingin menghapus tag "${r.tag?.nm_tag}"?`}),e.jsx(O,{id:"tag-form-modal",isOpen:l.open,onClose:i,title:l.tag?"Edit Tag":"Tambah Tag",size:"md",children:e.jsx("form",{onSubmit:M,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"form-control w-full",children:[e.jsx("label",{className:"label",children:e.jsxs("span",{className:"label-text",children:["Nama Tag ",e.jsx("span",{className:"text-error",children:"*"})]})}),e.jsx("input",{type:"text",placeholder:"Contoh: tutorial, review, dance",className:`input input-bordered w-full ${t.nm_tag?"input-error":""}`.trim(),value:s.nm_tag,onChange:a=>g("nm_tag",a.target.value),required:!0,maxLength:50}),t.nm_tag&&e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text-alt text-error",children:t.nm_tag})})]}),e.jsxs("div",{className:"form-control w-full",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Slug Tag"})}),e.jsx("input",{type:"text",placeholder:"Akan di-generate otomatis",className:`input input-bordered w-full ${t.slug_tag?"input-error":""}`.trim(),value:s.slug_tag,readOnly:!0,maxLength:50}),t.slug_tag&&e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text-alt text-error",children:t.slug_tag})})]}),e.jsxs("div",{className:"modal-action",children:[e.jsx(c,{type:"button",variant:"ghost",onClick:i,disabled:h,children:"Batal"}),e.jsx(c,{type:"submit",variant:"primary",loading:h,children:l.tag?"Update Tag":"Simpan Tag"})]})]})})})]})}export{J as default};
