import{u as E,r as n,b as I,j as e,H,a as _}from"./app-DbkAcIcf.js";import{A as $}from"./AdminLayout-CEJfVZvh.js";import{C as w,a as C,b as F,c as W,d as q}from"./Card-ScLjZ8A4.js";import{B as f}from"./Button-CS187W_5.js";import{B as z}from"./Badge-BV8LNYju.js";import{S as R,C as U,M as K}from"./SearchInput-Cub6SfUs.js";import{a as y}from"./aos-BTYriBEt.js";import"./Avatar-B3yzDNTs.js";import"./createLucideIcon-Bfkpeow3.js";import"./tag-CRFwzLi5.js";function se({auth:P,platforms:j}){const{flash:b}=E().props,[o,u]=n.useState({open:!1,platform:null}),[t,x]=n.useState({open:!1,platform:null}),[i,S]=n.useState("");n.useEffect(()=>{y.init({duration:800,easing:"ease-in-out",once:!0}),y.refresh()},[j]);const{data:l,setData:c,post:D,processing:g,errors:r,reset:v}=I({nm_platform:"",icon_platform:null,status_aktif:!0}),[m,d]=n.useState(null),N=j.filter(a=>{const s=i.toLowerCase();return a.nm_platform.toLowerCase().includes(s)||(a.status_aktif?"aktif":"nonaktif").includes(s)}),L=a=>{u({open:!0,platform:a})},M=()=>{o.platform&&_.post(`/admin/platform/${o.platform.id}`,{_method:"DELETE"},{preserveScroll:!0,onSuccess:()=>{u({open:!1,platform:null})}})},k=()=>{v(),d(null),x({open:!0,platform:null})},B=a=>{c({nm_platform:a.nm_platform,icon_platform:null,status_aktif:a.status_aktif??!0}),d(a.icon_platform?`/storage/${a.icon_platform}`:null),x({open:!0,platform:a})},p=()=>{x({open:!1,platform:null}),d(null),v()},T=a=>{const s=a.target.files[0];if(s){c("icon_platform",s);const h=new FileReader;h.onloadend=()=>{d(h.result)},h.readAsDataURL(s)}},A=a=>{if(a.preventDefault(),t.platform){const s=new FormData;s.append("_method","PUT"),s.append("nm_platform",l.nm_platform),l.icon_platform&&s.append("icon_platform",l.icon_platform),s.append("status_aktif",l.status_aktif?"1":"0"),_.post(`/admin/platform/${t.platform.id}`,s,{preserveScroll:!0,onSuccess:()=>{p()}})}else D(route("admin.platform.store"),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{p()}})};return e.jsxs($,{auth:P,header:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold leading-tight text-base-content",children:"Kelola Platform"}),e.jsx(f,{variant:"primary",onClick:k,children:"Tambah Platform"})]}),children:[e.jsx(H,{title:"Kelola Platform"}),e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"mb-6","data-aos":"fade-down",children:e.jsx(R,{placeholder:"Cari platform...",value:i,onChange:a=>S(a.target.value)})}),b?.success&&e.jsx("div",{"data-aos":"fade-down",className:"mb-6",children:e.jsxs("div",{className:"alert alert-success",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 shrink-0 stroke-current",fill:"none",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{children:b.success})]})}),N.length===0?e.jsx("div",{"data-aos":"fade-up",children:e.jsx(w,{children:e.jsx(C,{children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-base-content/60 mb-4",children:i?"Tidak ada platform yang sesuai dengan pencarian":"Belum ada data platform"}),!i&&e.jsx(f,{variant:"primary",onClick:k,children:"Tambah Platform Pertama"})]})})})}):e.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:N.map((a,s)=>e.jsx("div",{"data-aos":"fade-up","data-aos-delay":s*100,children:e.jsxs(w,{className:"h-full",children:[e.jsx(F,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(W,{className:"text-lg",children:a.nm_platform}),e.jsx(z,{variant:a.status_aktif?"success":"error",children:a.status_aktif?"Aktif":"Nonaktif"})]})}),e.jsx(C,{children:e.jsxs("div",{className:"space-y-2",children:[a.icon_platform&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-base-content/60",children:"Icon:"}),e.jsx("div",{className:"mt-1",children:e.jsx("img",{src:`/storage/${a.icon_platform}`,alt:a.nm_platform,className:"w-16 h-16 object-contain"})})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-base-content/60",children:"Dibuat:"}),e.jsx("p",{className:"text-sm text-base-content",children:new Date(a.created_at).toLocaleDateString("id-ID")})]})]})}),e.jsxs(q,{children:[e.jsx("button",{className:"btn btn-warning btn-sm",onClick:()=>B(a),title:"Edit",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("button",{className:"btn btn-error btn-sm",onClick:()=>L(a),title:"Hapus",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})},a.id))})]}),e.jsx(U,{id:"delete-platform-modal",isOpen:o.open,onClose:()=>u({open:!1,platform:null}),onConfirm:M,title:"Hapus Platform",message:`Apakah Anda yakin ingin menghapus platform "${o.platform?.nm_platform}"?`}),e.jsx(K,{id:"platform-form-modal",isOpen:t.open,onClose:p,title:t.platform?"Edit Platform":"Tambah Platform",size:"lg",children:e.jsx("form",{onSubmit:A,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"form-control w-full",children:[e.jsx("label",{className:"label",children:e.jsxs("span",{className:"label-text",children:["Nama Platform ",e.jsx("span",{className:"text-error",children:"*"})]})}),e.jsx("input",{type:"text",placeholder:"Contoh: YouTube, Instagram, TikTok",className:`input input-bordered w-full ${r.nm_platform?"input-error":""}`.trim(),value:l.nm_platform,onChange:a=>c("nm_platform",a.target.value),required:!0,maxLength:50}),r.nm_platform&&e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text-alt text-error",children:r.nm_platform})})]}),e.jsxs("div",{className:"form-control w-full",children:[e.jsx("label",{className:"label",children:e.jsxs("span",{className:"label-text",children:["Icon Platform ",e.jsx("span",{className:"text-error",children:"*"})]})}),e.jsx("input",{type:"file",accept:"image/*",className:`file-input file-input-bordered w-full ${r.icon_platform?"file-input-error":""}`.trim(),onChange:T,required:!0}),t.platform&&m&&!m.startsWith("data:")&&e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text-alt text-info",children:"Icon saat ini akan diganti dengan gambar baru"})}),r.icon_platform&&e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text-alt text-error",children:r.icon_platform})}),m&&e.jsx("div",{className:"mt-2",children:e.jsx("img",{src:m,alt:"Preview",className:"w-24 h-24 object-contain border border-base-300 rounded-lg"})})]}),e.jsx("div",{className:"form-control",children:e.jsxs("label",{className:"label cursor-pointer justify-start gap-2",children:[e.jsx("input",{type:"checkbox",className:"checkbox checkbox-primary",checked:l.status_aktif,onChange:a=>c("status_aktif",a.target.checked)}),e.jsx("span",{className:"label-text",children:"Status Aktif"})]})}),e.jsxs("div",{className:"modal-action",children:[e.jsx(f,{type:"button",variant:"ghost",onClick:p,disabled:g,children:"Batal"}),e.jsx(f,{type:"submit",variant:"primary",loading:g,children:t.platform?"Update Platform":"Simpan Platform"})]})]})})})]})}export{se as default};
