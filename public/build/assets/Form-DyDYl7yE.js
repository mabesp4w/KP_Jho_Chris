import{b as N,r as d,j as a,H as _,a as p}from"./app-CjDbdObc.js";import{B as f}from"./Button-BzKMKfAB.js";import{C as g,b as v,c as k,a as P}from"./Card-Brh-erEJ.js";import{A as w}from"./AdminLayout-u3UsJVij.js";import{a as y}from"./tag-KTfluBNR.js";import"./Avatar-CPtAHbrq.js";import"./createLucideIcon-CNnzuROm.js";function A({auth:x,platform:r}){const s=!!r,{data:l,setData:i,post:u,processing:m,errors:n}=N({nm_platform:r?.nm_platform||"",icon_platform:null,status_aktif:r?.status_aktif??!0}),[o,h]=d.useState(r?.icon_platform?`/storage/${r.icon_platform}`:null);d.useEffect(()=>{y.init({duration:800,easing:"ease-in-out",once:!0})},[]);const b=t=>{const e=t.target.files[0];if(e){i("icon_platform",e);const c=new FileReader;c.onloadend=()=>{h(c.result)},c.readAsDataURL(e)}},j=t=>{if(t.preventDefault(),s){const e=new FormData;e.append("_method","PUT"),e.append("nm_platform",l.nm_platform),l.icon_platform&&e.append("icon_platform",l.icon_platform),e.append("status_aktif",l.status_aktif?"1":"0"),p.post(`/admin/platform/${r.id}`,e,{preserveScroll:!0})}else u(route("admin.platform.store"),{preserveScroll:!0,forceFormData:!0})};return a.jsxs(w,{auth:x,header:a.jsx("h2",{className:"text-xl leading-tight font-semibold text-base-content",children:s?"Edit Platform":"Tambah Platform"}),children:[a.jsx(_,{title:s?"Edit Platform":"Tambah Platform"}),a.jsx("div",{className:"mx-auto max-w-4xl",children:a.jsx("div",{"data-aos":"fade-up",children:a.jsxs(g,{children:[a.jsx(v,{children:a.jsx(k,{children:s?"Edit Data Platform":"Tambah Data Platform"})}),a.jsx(P,{children:a.jsx("form",{onSubmit:j,children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"form-control w-full",children:[a.jsx("label",{className:"label",children:a.jsxs("span",{className:"label-text",children:["Nama Platform ",a.jsx("span",{className:"text-error",children:"*"})]})}),a.jsx("input",{type:"text",placeholder:"Contoh: YouTube, Instagram, TikTok",className:`input-bordered input w-full ${n.nm_platform?"input-error":""}`.trim(),value:l.nm_platform,onChange:t=>i("nm_platform",t.target.value),required:!0,maxLength:50}),n.nm_platform&&a.jsx("label",{className:"label",children:a.jsx("span",{className:"label-text-alt text-error",children:n.nm_platform})})]}),a.jsxs("div",{className:"form-control w-full",children:[a.jsx("label",{className:"label",children:a.jsxs("span",{className:"label-text",children:["Icon Platform ",a.jsx("span",{className:"text-error",children:"*"})]})}),a.jsx("input",{type:"file",accept:"image/*",className:`file-input file-input-bordered w-full ${n.icon_platform?"file-input-error":""}`.trim(),onChange:b,required:!0}),s&&o&&!o.startsWith("data:")&&a.jsx("label",{className:"label",children:a.jsx("span",{className:"label-text-alt text-info",children:"Icon saat ini akan diganti dengan gambar baru"})}),n.icon_platform&&a.jsx("label",{className:"label",children:a.jsx("span",{className:"label-text-alt text-error",children:n.icon_platform})}),o&&a.jsx("div",{className:"mt-2",children:a.jsx("img",{src:o,alt:"Preview",className:"w-24 h-24 object-contain border border-base-300 rounded-lg"})})]}),a.jsx("div",{className:"form-control",children:a.jsxs("label",{className:"label cursor-pointer justify-start gap-2",children:[a.jsx("input",{type:"checkbox",className:"checkbox checkbox-primary",checked:l.status_aktif,onChange:t=>i("status_aktif",t.target.checked)}),a.jsx("span",{className:"label-text",children:"Status Aktif"})]})}),a.jsxs("div",{className:"flex gap-4 pt-4",children:[a.jsx(f,{type:"submit",variant:"primary",loading:m,className:"flex-1",children:s?"Update Platform":"Simpan Platform"}),a.jsx(f,{type:"button",variant:"outline",onClick:()=>p.visit(route("admin.platform.index")),disabled:m,children:"Batal"})]})]})})})]})})})]})}export{A as default};
