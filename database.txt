<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    /**
     * Run the migrations.
     */
    public function up(): void
    {
        Schema::create('platform', function (Blueprint $table) {
            $table->id();
            $table->string('nm_platform', 50)->unique(); // Nama platform: YouTube, Instagram, TikTok, Facebook
            $table->string('icon_platform')->nullable(); // Icon/logo platform
            $table->boolean('status_aktif')->default(true); // Status aktif/nonaktif
            $table->timestamps();
        });
    }

    /**
     * Reverse the migrations.
     */
    public function down(): void
    {
        Schema::dropIfExists('platform');
    }
};


<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    /**
     * Run the migrations.
     */
    public function up(): void
    {
        Schema::create('kategori_konten', function (Blueprint $table) {
            $table->id();
            $table->string('nm_kategori', 100); // Nama kategori: Tutorial, Review Produk, Dance, dll
            $table->string('slug_kategori', 100)->unique(); // Slug untuk URL
            $table->text('desk_kategori')->nullable(); // Deskripsi kategori
            $table->timestamps();
        });
    }

    /**
     * Reverse the migrations.
     */
    public function down(): void
    {
        Schema::dropIfExists('kategori_konten');
    }
};

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    /**
     * Run the migrations.
     */
    public function up(): void
    {
        Schema::create('konten', function (Blueprint $table) {
            $table->id();
            // Relasi ke tabel lain
            $table->foreignId('id_platform')->constrained('platform')->onDelete('cascade');
            $table->foreignId('id_kategori')->nullable()->constrained('kategori_konten')->onDelete('cascade');

            // Data konten
            $table->string('judul_konten'); // Judul konten
            $table->text('link_konten'); // Link/URL konten

            // Tanggal publikasi
            $table->date('tgl_publikasi'); // Tanggal publikasi
            $table->year('tahun'); // Tahun (untuk rekap tahunan)
            $table->tinyInteger('bulan'); // Bulan (1-12)

            // Informasi tambahan
            $table->text('catatan')->nullable(); // Catatan/keterangan tambahan

            // Status dan promosi
            $table->enum('status_konten', ['draft', 'publikasi', 'arsip'])->default('publikasi');
            $table->boolean('perlu_promosi')->default(false); // Perlu dipromosikan ulang
            $table->boolean('kolaborasi')->default(false); // Apakah kolaborasi
            $table->string('kolaborasi_dengan')->nullable(); // Kolaborasi dengan siapa

            // Metrik engagement (opsional, bisa diisi manual atau via API)
            $table->integer('jml_views')->nullable(); // Jumlah views/tayangan
            $table->integer('jml_likes')->nullable(); // Jumlah likes/suka
            $table->integer('jml_komentar')->nullable(); // Jumlah komentar
            $table->integer('jml_share')->nullable(); // Jumlah share/bagikan

            // Timestamps
            $table->timestamps();
            $table->softDeletes(); // Untuk soft delete

            // Index untuk performa query
            $table->index('tgl_publikasi');
            $table->index(['tahun', 'bulan']);
            $table->index('status_konten');
        });
    }

    /**
     * Reverse the migrations.
     */
    public function down(): void
    {
        Schema::dropIfExists('konten');
    }
};


<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    /**
     * Run the migrations.
     */
    public function up(): void
    {
        Schema::create('tag', function (Blueprint $table) {
            $table->id();
            $table->string('nm_tag', 50)->unique(); // Nama tag
            $table->string('slug_tag', 50)->unique(); // Slug untuk URL
            $table->timestamps();
        });

        // Tabel pivot untuk relasi many-to-many
        Schema::create('konten_tag', function (Blueprint $table) {
            $table->id();
            $table->foreignId('id_konten')->constrained('konten')->onDelete('cascade');
            $table->foreignId('id_tag')->constrained('tag')->onDelete('cascade');
            $table->timestamps();

            // Unique constraint untuk menghindari duplikasi
            $table->unique(['id_konten']);
        });
    }

    /**
     * Reverse the migrations.
     */
    public function down(): void
    {
        Schema::dropIfExists('konten_tag');
        Schema::dropIfExists('tag');
    }
};


